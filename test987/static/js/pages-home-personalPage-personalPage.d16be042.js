(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-personalPage-personalPage"],{1729:function(t,e,n){t.exports=n.p+"static/img/money.01df731a.png"},"1d44":function(t,e,n){"use strict";n.r(e);var a=n("57d3"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"424e":function(t,e,n){"use strict";n.r(e);var a=n("b52f"),i=n("1d44");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("c375");var s=n("f0c5"),r=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"08615f2a",null,!1,a["a"],void 0);e["default"]=r.exports},"57d3":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("14d9");var i=a(n("2909")),o=a(n("c7eb")),s=a(n("1da1")),r=a(n("5530")),c=n("26cb"),u=n("4b93"),l=a(n("514c")),d=a(n("76b2")),f=a(n("3bb4")),v=a(n("1e37")),h=n("ffd9"),p={components:{postItem:l.default,comment:d.default,playVideo:f.default,vDialog:v.default},data:function(){return{bgList:[],current:0,user_id:0,fanNav:[{name:"关注",num:0},{name:"粉丝",num:0},{name:"访客",num:0}],showNav:!1,userInfo:{},list:[],page:1,total:0,loading:!1,showCommentDialog:!1,storage_index:null,topic_id:null,all_num:0,showMoneyDialog:!1,postCost:0,postCostId:null,postCostIndex:null}},computed:(0,r.default)({},(0,c.mapState)(["defaultSetting","sexMap","userId","vipMap"])),onLoad:function(t){this.user_id=t.user_id,this.getUserInfo(),this.getPostList()},onShow:function(){this.userId!=this.user_id&&this.visitThisUser()},methods:{renderNumStr:function(t){return(0,h.numberToStr)(t)},getUserInfo:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var n,a,i;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.user.info(t.user_id);case 2:if(n=e.sent,a=n.code,i=n.data,console.log(i),200===a){e.next=8;break}return e.abrupt("return");case 8:t.userInfo=i,t.fanNav[0].num=i.follows,t.fanNav[1].num=i.fans,t.fanNav[2].num=i.visitors,t.bgList=i.images?i.images.split(","):[];case 13:case"end":return e.stop()}}),e)})))()},getPostList:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var n,a,s;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return(t.page=1)&&(t.list=[]),t.loading=!0,a={page:t.page,size:10,type:6,user_id:t.user_id},console.log(a),e.next=6,u.topic.list(a);case 6:if(s=e.sent,t.loading=!1,200===s.code){e.next=10;break}return e.abrupt("return");case 10:t.total=s.data.total,(n=t.list).push.apply(n,(0,i.default)(s.data.data));case 12:case"end":return e.stop()}}),e)})))()},visitThisUser:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.user.visit({user_id:t.user_id});case 2:case"end":return e.stop()}}),e)})))()},scrollLower:function(){console.log("scrollLower"),this.list.length!=this.total&&(this.loading||(this.page+=1,this.getPostList()))},viewScroll:function(t){t.detail.scrollTop>322?this.showNav=!0:this.showNav=!1},goback:function(){uni.navigateBack()},previewHeader:function(){uni.previewImage({current:0,urls:[this.userInfo.header||this.defaultSetting.client.header]})},previewBgImg:function(t){uni.previewImage({current:t,urls:this.bgList})},routeVideo:function(){uni.navigateTo({url:"/pages/video/video"})},follow:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var n;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.user.follow({user_id:t.user_id,is_follow:!t.userInfo.is_follow});case 2:if(n=e.sent,200===n.code){e.next=5;break}return e.abrupt("return");case 5:t.userInfo.is_follow=!t.userInfo.is_follow;case 6:case"end":return e.stop()}}),e)})))()},changeListData:function(t){var e=t.index,n=t.key,a=t.data;this.$set(this.list[e],n,a)},toPlayVideo:function(t){this.$refs.playVideo.toPlayVideo(t)},showCommet:function(t){var e=t.item,n=t.index;this.storage_index=n,this.topic_id=e.id,this.all_num=e.comments,this.showCommentDialog=!0},comment_add:function(){var t=this.list[this.storage_index].comments;this.$set(this.list[this.storage_index],"comments",t+1)},showMoney:function(t){console.log(t),this.postCostIndex=t.index,this.postCostId=t.id,this.postCost=t.price,this.showMoneyDialog=!0},purchaseTopic:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var n;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.userInfo.point<t.postCost)){e.next=3;break}return t.$toast("金币不够"),e.abrupt("return");case 3:return e.next=5,u.topic.purchase({id:t.postCostId});case 5:if(n=e.sent,console.log(n),200===n.code){e.next=9;break}return e.abrupt("return");case 9:t.$set(t.list[t.postCostIndex],"is_purchased",!0),t.postCostIndex=null,t.postCostId=null,t.postCost=0,t.showMoneyDialog=!1;case 14:case"end":return e.stop()}}),e)})))()}}};e.default=p},"9dfc":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.clearfix[data-v-08615f2a]{zoom:1}.clearfix[data-v-08615f2a]:after{content:"";clear:both;height:0;line-height:0;display:block;visibility:hidden}.arrow[data-v-08615f2a]{position:absolute;left:%?25?%;top:%?107?%;width:%?50?%;height:%?50?%;border-radius:%?25?%;background-color:hsla(0,0%,100%,.1)}.arrow uni-image[data-v-08615f2a]{width:%?26?%;height:%?26?%}.navbar[data-v-08615f2a]{padding:%?97?% %?39?% %?9?% %?36?%;position:fixed;width:100%;box-sizing:border-box;top:0;left:0;border-bottom:%?1?% solid #222a3a;background-color:#16202a}.navbar .navbar-left uni-image[data-v-08615f2a]{width:%?26?%;height:%?26?%}.navbar .navbar-content[data-v-08615f2a]{padding:0 %?23?%}.navbar .navbar-content .header[data-v-08615f2a]{width:%?70?%;height:%?70?%;border-radius:50%;margin-right:%?10?%}.navbar .navbar-content uni-text[data-v-08615f2a]{font-size:%?30?%;font-weight:500;color:#fff}.navbar .navbar-right[data-v-08615f2a]{width:%?50?%;height:%?50?%;background:hsla(0,0%,100%,.1);border-radius:50%}.navbar .navbar-right uni-image[data-v-08615f2a]{width:%?24?%;height:%?24?%}.container .default-img[data-v-08615f2a]{width:100%;height:%?386?%}.container .swiper_box[data-v-08615f2a]{position:relative}.container .swiper_box .indicator[data-v-08615f2a]{display:flex;flex-direction:row;justify-content:center;margin-bottom:%?64?%}.container .swiper_box .indicator__dot[data-v-08615f2a]{height:%?20?%;width:%?20?%;border-radius:50%;background-color:hsla(0,0%,100%,.35);margin:0 %?10?%;transition:background-color .3s}.container .swiper_box .indicator__dot--active[data-v-08615f2a]{background-color:#1d9be8}.container .content_box[data-v-08615f2a]{position:relative;background-color:#16202a}.container .content_box[data-v-08615f2a]::after{content:"";width:100%;height:%?64?%;position:absolute;top:%?-63?%;left:0;background-color:#16202a;border-radius:%?80?% %?80?% 0 0}.container .content_box .user_info_box[data-v-08615f2a]{padding:0 %?40?%}.container .content_box .user_info_box .member_bg[data-v-08615f2a]{width:%?90?%;height:%?90?%;position:relative}.container .content_box .user_info_box .member_bg .avatar[data-v-08615f2a]{width:100%;height:100%;border-radius:100%}.container .content_box .user_info_box .member_bg .vip[data-v-08615f2a]{width:%?94?%;height:%?102?%;position:absolute;right:0;bottom:0;z-index:2}.container .content_box .fan_box .message[data-v-08615f2a]{width:%?50?%;height:%?50?%;background:hsla(0,0%,100%,.1);border-radius:50%}.container .content_box .fan_box .message uni-image[data-v-08615f2a]{width:%?24?%;height:%?24?%}.container .content_box .fan_box .focus[data-v-08615f2a]{width:%?100?%;height:%?50?%;line-height:%?50?%;text-align:center;background:hsla(0,0%,100%,.1);border-radius:%?25?%;font-size:%?24?%;font-weight:500;color:#1da1f2;margin-left:%?20?%}.container .content_box .user_info[data-v-08615f2a]{padding:0 %?20?%}.container .content_box .user_info .user_name_box[data-v-08615f2a]{display:flex;align-items:center;margin-bottom:%?18?%;margin-top:%?9?%}.container .content_box .user_info .user_name_box .user_name[data-v-08615f2a]{color:#fff;font-size:%?30?%;margin-right:%?20?%}.container .content_box .user_info .user_name_box .grade[data-v-08615f2a]{width:%?30?%;height:%?30?%;margin-right:%?20?%}.container .content_box .user_info .user_name_box .member[data-v-08615f2a]{width:%?30?%;height:%?30?%}.container .content_box .user_info .id_box[data-v-08615f2a]{color:#9aa8b5;font-size:%?26?%;padding-bottom:%?20?%}.container .content_box .sign_box[data-v-08615f2a]{padding:%?22?% %?48?% %?28?% %?48?%;color:#9aa8b5;font-size:%?26?%;line-height:%?40?%}.container .content_box .menu_nav_wrap[data-v-08615f2a]{padding:0 %?20?%}.container .content_box .menu_nav[data-v-08615f2a]{display:flex;align-items:center;justify-content:space-between;border-top:%?1?% solid #222a3a;border-bottom:%?1?% solid #222a3a}.container .content_box .menu_nav .menu_item[data-v-08615f2a]{height:%?119?%;box-sizing:border-box;padding:%?16?% %?14?% %?14?% %?11?%}.container .content_box .menu_nav .menu_item .tit[data-v-08615f2a]{font-size:%?24?%;font-weight:500;color:#9aa8b5;margin-bottom:%?17?%}.container .content_box .menu_nav .menu_item .text[data-v-08615f2a]{font-size:%?30?%;font-weight:900;color:#fff}.container .content_box .post-title[data-v-08615f2a]{margin-top:%?44?%;margin-bottom:%?10?%;font-size:%?36?%;font-weight:700;color:#fff;padding-left:%?32?%}',""]),t.exports=e},a70b:function(t,e,n){var a=n("9dfc");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("12341dae",a,!0,{sourceMap:!1,shadowMode:!1})},b52f:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uSwiper:n("e938").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout",{attrs:{showPading:!1,hasTabbar:!1},scopedSlots:t._u([{key:"header",fn:function(){return[t.showNav?a("v-uni-view",{staticClass:"navbar flex justify-between items-center"},[a("v-uni-view",{staticClass:"navbar-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goback()}}},[a("v-uni-image",{attrs:{src:n("7d44"),mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"navbar-content flex-1 flex items-center"},[a("v-uni-image",{staticClass:"header",attrs:{src:t.userInfo.header?t.userInfo.header:t.defaultSetting.client.header,mode:"aspectFill"}}),a("v-uni-text",[t._v(t._s(t.userInfo.nick_name))])],1),a("v-uni-view",{staticClass:"navbar-right flex items-center justify-center"},[a("v-uni-image",{attrs:{src:n("2560"),mode:"aspectFill"}})],1)],1):a("v-uni-view",{staticClass:"arrow flex justify-center items-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goback()}}},[a("v-uni-image",{attrs:{src:n("7d44"),mode:"aspectFill"}})],1)]},proxy:!0}])},[a("v-uni-view",{staticClass:"container"},[a("v-uni-scroll-view",{staticStyle:{height:"100vh"},attrs:{"scroll-y":"true"},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.viewScroll.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrollLower.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"swiper_box"},[t.bgList.length?a("u-swiper",{attrs:{list:t.bgList,height:"386upx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewBgImg.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.current=e.current}.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"indicator",attrs:{slot:"indicator"},slot:"indicator"},t._l(t.bgList,(function(e,n){return a("v-uni-view",{key:n,staticClass:"indicator__dot",class:[n===t.current&&"indicator__dot--active"]})})),1)],1):a("v-uni-image",{staticClass:"default-img",attrs:{mode:"aspectFill",src:t.defaultSetting.client.album}})],1),a("v-uni-view",{staticClass:"content_box"},[a("v-uni-view",{staticClass:"user_info_box flex"},[a("v-uni-view",{staticClass:"member_bg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewHeader()}}},[a("v-uni-image",{staticClass:"avatar",attrs:{src:t.userInfo.header?t.userInfo.header:t.defaultSetting.client.header}}),t.userInfo.vip_level&&t.checkVipValid(t.userInfo.vip_expire)?a("v-uni-image",{staticClass:"vip",attrs:{src:t.vipMap[t.userInfo.vip_level].icon}}):t._e()],1),a("v-uni-view",{staticClass:"user_info flex-1"},[a("v-uni-view",{staticClass:"user_name_box"},[a("v-uni-text",{staticClass:"user_name"},[t._v(t._s(t.userInfo.nick_name))]),void 0!==t.userInfo.sex&&0!==t.userInfo.sex?[a("v-uni-image",{staticClass:"grade",attrs:{src:t.sexMap[t.userInfo.sex].icon}})]:t._e()],2),a("v-uni-view",{staticClass:"id_box"},[t._v("ID："+t._s(t.userInfo.id))])],1),a("v-uni-view",{staticClass:"fan_box flex"},[t.userInfo.is_follow?a("v-uni-view",{staticClass:"focus",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow()}}},[t._v("已关注")]):a("v-uni-view",{staticClass:"focus",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow()}}},[t._v("关注")])],1)],1),t.userInfo.description?a("v-uni-view",{staticClass:"sign_box"},[t._v("个性签名："+t._s(t.userInfo.description))]):t._e(),a("v-uni-view",{staticClass:"menu_nav_wrap"},[a("v-uni-view",{staticClass:"menu_nav"},t._l(t.fanNav,(function(e){return a("v-uni-view",{key:e.name,staticClass:"menu_item flex flex-col flex-1 items-center justify-center"},[a("v-uni-text",{staticClass:"tit"},[t._v(t._s(e.name))]),a("v-uni-text",{staticClass:"text"},[t._v(t._s(t.renderNumStr(e.num)))])],1)})),1)],1),a("v-uni-view",{staticClass:"post-title"},[t._v("帖子 "+t._s(t.total))]),t.list.length?a("post-item",{attrs:{list:t.list,is_self:!0},on:{changeListData:function(e){arguments[0]=e=t.$handleEvent(e),t.changeListData.apply(void 0,arguments)},showCommet:function(e){arguments[0]=e=t.$handleEvent(e),t.showCommet.apply(void 0,arguments)},playVideo:function(e){arguments[0]=e=t.$handleEvent(e),t.toPlayVideo.apply(void 0,arguments)},showMoney:function(e){arguments[0]=e=t.$handleEvent(e),t.showMoney.apply(void 0,arguments)}}}):t._e()],1)],1)],1),a("comment",{attrs:{mode:"bottom",topic_id:t.topic_id,all_num:t.all_num,show:t.showCommentDialog},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.showCommentDialog=!1},comment_add:function(e){arguments[0]=e=t.$handleEvent(e),t.comment_add()}}}),a("play-video",{ref:"playVideo"}),a("v-dialog",{attrs:{width:"580upx",showTitle:!0,title:"收费贴",showClose:!0,maskClickHide:!0,showFooter:!1,show:t.showMoneyDialog},on:{comfirm:function(e){arguments[0]=e=t.$handleEvent(e),t.showMoneyDialog=!1},close:function(e){arguments[0]=e=t.$handleEvent(e),t.showMoneyDialog=!1}}},[a("v-uni-view",{staticClass:"pay-to-watch flex flex-col items-center"},[a("v-uni-image",{attrs:{src:n("1729")}}),a("v-uni-text",{staticClass:"txt"},[t._v("当前帖子需付费 "+t._s(t.postCost)+" 金币")]),a("v-uni-text",{staticClass:"txt"},[t._v("查看！")]),a("v-uni-view",{staticClass:"btn_active pay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.purchaseTopic()}}},[t._v("付费观看")])],1)],1)],1)},o=[]},c375:function(t,e,n){"use strict";var a=n("a70b"),i=n.n(a);i.a}}]);